<!DOCTYPE html> 
<html> 
	<head> 
		<title>Welcome to RegWiz</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
			
		<link rel="stylesheet" href="./cse170project/jquery.mobile-1.4.0/jquery.mobile-1.4.0.min.css" />
		<script src="./cse170project/jquery.mobile-1.4.0/jquery-1.9.1.min.js"></script>
		<script src="./cse170project/jquery.mobile-1.4.0/jquery.mobile-1.4.0.min.js"></script>
	
		<style>
			#headerDiv {
				width: 100%;
		  		position: relative;  // change to fixed to stick the header div when scrolling
		  		top: 0px;
		  		z-index: 10000;
			}
		</style>
	</head> 
	
	<body>
	
		<div id="homePage" data-role="page" data-fullscreen="true" data-theme="a">
			<div id="sticky-anchor"></div>
			
			<header id="headerDiv" data-role="header" data-theme="b">
				<h4>Welcome to RegWiz</h4>
			</header>
	
			<div data-role="content">	
				<ul id="classList"
					data-role="listview" 
					data-inset="true" 
					data-filter="true" 
					data-filtertext="type in classes">
				</ul>
			</div>
			<footer data-role="footer" data-theme="b" data-position="fixed">
				<nav data-role="navbar">
					<ul>
						<li><a data-icon="grid">My Schedule</a></li>
						<li><a data-icon="info">Info</a></li>
					</ul>
				</nav>
			</footer>
		
		</div>
		
		<script>
			var classInfoFile = "./cse170project/cse.json";
			
			$.getJSON(classInfoFile, function(classes){
			
			   	// start with an empty list
			   	$('#classList').empty();
			   
			   	// add classes to the list
				$.each(classes, function(i, className){
					$('#classList').append(generateClassLink(className));
			   	});
			 
			   	// refresh the page to show the updated class list
			   	$('#classList').listview('refresh');
			});
		
			// create a class link
			function generateClassLink(className){
			
		//		return '<li><a onclick="goToClassDetailPage(\' ' + 
		//						className.name + '\',\'' + 
		//						className.description + '\')"> ' + 
		//						className.name + ' </a></li>';				
								
								
				
				var generateClassLink = $("<li><a onclick='goToClassDetailPage(\" " + className.name + " \" , \" " + 
																					  className.description + " \")'>" + 
																					  className.name +
											  "</a>" +
										  "</li>");
								
				return generateClassLink
								
			}
			
			function goToClassDetailPage(className, classDescription){
			
				var classPage = 
						$("<div data-role='page'>" + 
					  		"<div data-role='header' data-theme='b' data-position='fixed'>" + 
					  			"<h1>" + className + "</h1>" + 
					  		"</div>" + 
					  			
						  	"<div data-role='content' style='background-color: lightgrey;'>" + 
						  		"<h3> Class Description </h3><hr />" +
						  		"<p>" + classDescription + "</p>" + 
						  	"</div>" +
						  		
						  	"<div data-role='footer' data-theme='b' data-position='fixed'>" + 
						  		"<nav data-role='navbar'>" +
						  			"<ul>" +
						  				"<li>" +
						  					"<a href='#homePage' data-icon='grid' " + 
						  						"data-direction='reverse'" +
						  						"data-transition='slide'>"+
						  						"My Schedule</a>" +
						  				"</li>" +
						  				"<li>" +
						  					"<a href='#homePage' data-icon='home' " +
							  					"data-direction='reverse'" +
						  						"data-transition='slide'>"+
						  						"Home</a>" +
						  				"</li>" +
						  			"</ul>" +
						  		"</nav>" +
						  	"</div>" +		
						"</div>");
			
		
				 //$.mobile.defaultPageTransition = "slide"; // option to enable slide animation
				 classPage.appendTo($.mobile.pageContainer);
				
				 //go to the newly created page
				 $.mobile.changePage(classPage);
			}  
			
			
			function sticky_relocate() {
			  var window_top = $(window).scrollTop();
			  var div_top = $('#sticky-anchor').offset().top;
			  if (window_top > div_top) {
			    $('#headerDiv').addClass('stick');
			  } else {
			    $('#headerDiv').removeClass('stick');
			  }
			}
			
			$(function() {
			  $(window).scroll(sticky_relocate);
			  sticky_relocate();
			});
			
		</script>
		
	</body>
</html>















